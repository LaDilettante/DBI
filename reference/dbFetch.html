<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fetch records from a previously executed query — dbFetch • DBI</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">DBI</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fetch records from a previously executed query</h1>
    </div>

    
    <p>Fetch the next <code>n</code> elements (rows) from the result set and return them
as a data.frame.</p>
    

    <pre><span class='fu'>dbFetch</span>(<span class='no'>res</span>, <span class='kw'>n</span> <span class='kw'>=</span> -<span class='fl'>1</span>, <span class='no'>...</span>)

<span class='fu'>fetch</span>(<span class='no'>res</span>, <span class='kw'>n</span> <span class='kw'>=</span> -<span class='fl'>1</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>res</dt>
      <dd>An object inheriting from <a href='DBIResult-class.html'>DBIResult</a>, created by
<code><a href='dbSendQuery.html'>dbSendQuery()</a></code>.</dd>
      <dt>n</dt>
      <dd>maximum number of records to retrieve per fetch. Use <code>n = -1</code>
to retrieve all pending records.  Some implementations may recognize other
special values.</dd>
      <dt>...</dt>
      <dd>Other arguments passed on to methods.</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>dbFetch()</code> always returns a data.frame
with as many rows as records were fetched and as many
columns as fields in the result set,
even if the result is a single value
or has one
or zero rows.
An attempt to fetch from a closed result set raises an error.
If the <code>n</code> argument is not an atomic whole number
greater or equal to -1, an error is raised,
but a subsequent call to <code>dbFetch()</code> with proper <code>n</code> argument succeeds.
Calling <code>dbFetch()</code> on a result set from a data manipulation query
created by <code><a href='dbSendStatement.html'>dbSendStatement()</a></code>
can be fetched and return an empty data frame, with a warning.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>fetch</code> is provided for compatibility with older DBI clients - for all
new code you are strongly encouraged to use <code>dbFetch</code>. The default
method for <code>dbFetch</code> calls <code>fetch</code> so that it is compatible with
existing code. Implementors are free to provide methods for <code>dbFetch</code>
only.</p>
    
    <h2 class="hasAnchor" id="specification"><a class="anchor" href="#specification"></a>Specification</h2>

    <p></p>
    <p>Fetching multi-row queries with one
or more columns be default returns the entire result.
Multi-row queries can also be fetched progressively
by passing a whole number (integer
or numeric)
as the <code>n</code> argument.
A value of Inf for the <code>n</code> argument is supported
and also returns the full result.
If more rows than available are fetched, the result is returned in full
without warning.
If zero rows are fetched, the columns of the data frame are still fully
typed.
Fetching fewer rows than available is permitted,
no warning is issued when clearing the result set.</p>
    <p>The column types of the returned data frame depend on the data returned:
<ul>
<li> integer for integer values between -2^31 and 2^31 - 1
</li>
<li> numeric for numbers with a fractional component
</li>
<li> logical for Boolean values (some backends may return an integer)
</li>
<li> character for text
</li>
<li> lists of raw for blobs (with <code>NULL</code> entries for SQL NULL values)
</li>
<li> coercible using <code>as.Date()</code> for dates
(also applies to the return value of the SQL function <code>current_date</code>)
</li>
<li> coercible using <code><a href='http://www.rdocumentation.org/packages/hms/topics/hms'>hms::as.hms()</a></code> for times
(also applies to the return value of the SQL function <code>current_time</code>)
</li>
<li> coercible using <code>as.POSIXct()</code> for timestamps
(also applies to the return value of the SQL function <code>current_timestamp</code>)
</li>
<li> NA for SQL <code>NULL</code> values
</li>
</ul></p>
    <p>If dates and timestamps are supported by the backend, the following R types are
used:
<ul>
<li> Date for dates
(also applies to the return value of the SQL function <code>current_date</code>)
</li>
<li> POSIXct for timestamps
(also applies to the return value of the SQL function <code>current_timestamp</code>)
</li>
</ul></p>
    <p>R has no built-in type with lossless support for the full range of 64-bit
or larger integers. Here, the following rules apply:
<ul>
<li> Values are returned as numeric
</li>
<li> Conversion to character always returns a lossless decimal representation
of the data
</li>
</ul></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Close the result set with <code><a href='dbClearResult.html'>dbClearResult()</a></code> as soon as you
finish retrieving the records you want.</p>
    <p>Other DBIResult generics: <code><a href='DBIResult-class.html'>DBIResult-class</a></code>,
  <code><a href='dbBind.html'>dbBind</a></code>, <code><a href='dbClearResult.html'>dbClearResult</a></code>,
  <code><a href='dbColumnInfo.html'>dbColumnInfo</a></code>, <code><a href='dbGetInfo.html'>dbGetInfo</a></code>,
  <code><a href='dbGetRowCount.html'>dbGetRowCount</a></code>,
  <code><a href='dbGetRowsAffected.html'>dbGetRowsAffected</a></code>,
  <code><a href='dbGetStatement.html'>dbGetStatement</a></code>,
  <code><a href='dbHasCompleted.html'>dbHasCompleted</a></code>, <code><a href='dbIsValid.html'>dbIsValid</a></code>,
  <code><a href='dbQuoteIdentifier.html'>dbQuoteIdentifier</a></code>,
  <code><a href='dbQuoteString.html'>dbQuoteString</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>con</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dbConnect.html'>dbConnect</a></span>(<span class='kw'>RSQLite</span><span class='kw'>::</span><span class='fu'>SQLite</span>(), <span class='st'>":memory:"</span>)

<span class='fu'><a href='dbWriteTable.html'>dbWriteTable</a></span>(<span class='no'>con</span>, <span class='st'>"mtcars"</span>, <span class='no'>mtcars</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># Fetch all results</span>
<span class='no'>rs</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dbSendQuery.html'>dbSendQuery</a></span>(<span class='no'>con</span>, <span class='st'>"SELECT * FROM mtcars WHERE cyl = 4"</span>)
<span class='fu'>dbFetch</span>(<span class='no'>rs</span>)</div><div class='output co'>#&gt;                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
#&gt; Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
#&gt; Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
#&gt; Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
#&gt; Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
#&gt; Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
#&gt; Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
#&gt; Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
#&gt; Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
#&gt; Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
#&gt; Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
#&gt; Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</div><div class='input'><span class='fu'><a href='dbClearResult.html'>dbClearResult</a></span>(<span class='no'>rs</span>)

<span class='co'># Fetch in chunks</span>
<span class='no'>rs</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dbSendQuery.html'>dbSendQuery</a></span>(<span class='no'>con</span>, <span class='st'>"SELECT * FROM mtcars"</span>)
<span class='kw'>while</span> (!<span class='fu'><a href='dbHasCompleted.html'>dbHasCompleted</a></span>(<span class='no'>rs</span>)) {
  <span class='no'>chunk</span> <span class='kw'>&lt;-</span> <span class='fu'>dbFetch</span>(<span class='no'>rs</span>, <span class='fl'>10</span>)
  <span class='fu'>print</span>(<span class='fu'>nrow</span>(<span class='no'>chunk</span>))
}</div><div class='output co'>#&gt; [1] 10
#&gt; [1] 10
#&gt; [1] 10
#&gt; [1] 2</div><div class='input'>
<span class='fu'><a href='dbClearResult.html'>dbClearResult</a></span>(<span class='no'>rs</span>)
<span class='fu'><a href='dbDisconnect.html'>dbDisconnect</a></span>(<span class='no'>con</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#specification">Specification</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by R Special Interest Group on Databases (R-SIG-DB), <a href='http://hadley.nz'>Hadley Wickham</a>, Kirill Müller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
